[command]
default=rose env-cat rose-app-run.conf >rose-app-expanded.conf ; $AFTERBURNER_HOME_DIR/bin/apprun.sh tempest_tracker.TempestTracker -c rose-app-expanded.conf --debug

[common]
data_frequency=6h
delete_processed=False
delete_source=False
input_directory=${DATAM}
nodeedit_vars=["slp", "uas", "vas"]
orography_dir=/data/d05/hadom/tempest_extremes_datafiles
output_directory=${DATAM}/tempest_tracking
plot_tracks=True
regrid_resolutions=["native"]
tc_detect_script=/home/d05/hadom/tempestextremes/bin/DetectNodes
tc_editor_script=/home/d05/hadom/tempestextremes/bin/NodeFileEditor
tc_stitch_script=/home/d05/hadom/tempestextremes/bin/StitchNodes
track_types=["tc_slp", "tc_vort_T63wc_nh", "etc_slp", "tc_vort_T63wc_sh"]
#um_file_pattern="{runid}a.{stream}{date_start}_{variable}.nc"
um_file_pattern="atmos_{runid}a_6h_{date_start}-{date_end}_pt-{variable}.nc"
variables_input=["slp", "zg", "ua", "va", "uas", "vas", "rvT63", "rvT42", "rh850"]
variables_rename = ["slp", "zg", "rv", "rvT63", "uas", "vas", "viwve", "viwvn", "ta", "rvT42", "rh850", "ua", "va"]
outputcmd_detect_default="slp,min,0;_VECMAG(uas,vas),max,3;zg_250,avg,3.0;surface_altitude,max,0;_VECMAG(ua_925,va_925),max,3;_VECMAG(ua_850,va_850),max,3;rvT63_850,max,3;rvT63_850,min,3;zg_250,max,3.0;zg_250,min,3.0;zg_300,avg,3.0;zg_300,max,3.0;zg_300,min,3.0;zg_500,avg,3.0;zg_500,max,3.0;zg_500,min,3.0;zg_600,avg,5.0;zg_600,max,5.0;zg_600,min,5.0;zg_925,avg,5.0;zg_925,max,5.0;zg_925,min,5.0;rh850,avg,3.0"
in_fmt_stitch_default="lon,lat,slp_min,sfcWind_max,zg_avg_250,orog_max,wind_max_925,wind_max_850,rvT63_max_850,rvT63_min_850,zg_max_250,zg_min_250,zg_avg_300,zg_max_300,zg_min_300,zg_avg_500,zg_max_500,zg_min_500,zg_avg_600,zg_max_600,zg_min_600,zg_avg_925,zg_max_925,zg_min_925,rh_avg_850"
out_fmt_profile1_default="lon,lat,slp_min,sfcWind_max,zg_avg_250,orog_max,wind_max_925,wind_max_850,rvT63_max_850,rvT63_min_850,zg_max_250,zg_min_250,zg_avg_300,zg_max_300,zg_min_300,zg_avg_500,zg_max_500,zg_min_500,zg_avg_600,zg_max_600,zg_min_600,zg_avg_925,zg_max_925,zg_min_925,rh_avg_850,radius_8,ace,acepsl,ike,pdi,rprof,rprof_slp"
out_fmt_profile2_default="lon,lat,slp_min,sfcWind_max,zg_avg_250,orog_max,wind_max_925,wind_max_850,rvT63_max_850,rvT63_min_850,zg_max_250,zg_min_250,zg_avg_300,zg_max_300,zg_min_300,zg_avg_500,zg_max_500,zg_min_500,zg_avg_600,zg_max_600,zg_min_600,zg_avg_925,zg_max_925,zg_min_925,rh_avg_850,radius_8,ace,acepsl,ike,pdi"

[cycl_slp_detect]
closedcontourcmd="slp,200.0,5.5,0"
latname=latitude
lonname=longitude
maxlat=
maxlon=
mergedist=6.0
minabslat=
minlat=
minlon=
noclosedcontourcmd=
out_header=
outputcmd="outputcmd_detect_default"
regional=
searchbymax=
searchbymin=slp
thresholdcmd=
timefilter=
verbosity=

[cycl_slp_profile]
calculate="rprof=radial_wind_profile(uas,vas,159,0.125);radius_8=lastwhere(rprof,>,8.0);ace=eval_ace(uas,vas,5.0);acepsl=eval_acepsl(slp,5.0);ike=eval_ike(uas,vas,5.0);pdi=eval_pdi(uas,vas,5.0)"
in_fmt="in_fmt_stitch_default"
latname='latitude'
lonname='longitude'
out_fmt="out_fmt_profile2_default"

[cycl_slp_stitch]
format=
in_fmt="in_fmt_stitch_default"
maxgap=3
min_endpoint_dist=8.0
min_path_dist=
mintime=10
out_file_format=
range=12.0
threshold=
timestride=

[env]
AFTERBURNER_HOME_DIR=/home/d04/jseddon/afterburner/software/turbofan/v1.3.1-py36
CYCLEPERIOD=$CYCLEPERIOD
PYTHONPATH=/home/d05/hadom/tenten/tempest_helper:$CYLC_TASK_WORK_DIR
SCITOOLS_MODULE=none
NCODIR=/projects/ocean/hadgem3/nco/nco-4.4.7/bin

[etc_med_detect]
closedcontourcmd="slp,20.0,1.0,0"
in_data=
in_data_list=
latname='latitude'
lonname='longitude'
maxlat=50.0
maxlon=45.0
mergedist=3.0
minabslat=
minlat=20.0
minlon=340.0
noclosedcontourcmd=
out=
out_file_list=
out_header=
outputcmd="outputcmd_detect_default"
regional=
searchbymax=
searchbymin="slp"
thresholdcmd=
timefilter=
verbosity=

[etc_med_profile]
calculate="rprof=radial_wind_profile(uas,vas,79,0.125);radius_8=lastwhere(rprof,>,8.0);rprof_slp=radial_profile(slp,79,0.125);ace=eval_ace(uas,vas,radius_8);acepsl=eval_acepsl(slp,radius_8);ike=eval_ike(uas,vas,radius_8);pdi=eval_pdi(uas,vas,radius_8)"
in_fmt="in_fmt_stitch_default"
latname='latitude'
lonname='longitude'
out_fmt="out_fmt_profile1_default"

[etc_med_stitch]
format=
in=
in_fmt="in_fmt_stitch_default"
maxgap=1
min_endpoint_dist=4.0
min_path_dist=
mintime=4
out=
out_file_format=
range=6.0
threshold=
timestride=

[etc_slp_detect]
closedcontourcmd="slp,200.0,5.5,0"
latname=latitude
lonname=longitude
maxlat=
maxlon=
mergedist=6.0
minabslat=
minlat=
minlon=
noclosedcontourcmd="_DIFF(zg_250,zg_500),-6.0,6.5,1.0"
out_header=
outputcmd="outputcmd_detect_default"
regional=
searchbymax=
searchbymin=slp
thresholdcmd=
timefilter=
verbosity=

[etc_slp_stitch]
format=
in_fmt="in_fmt_stitch_default"
maxgap=3
min_endpoint_dist=8.0
min_path_dist=
mintime=10
out_file_format=
range=6.0
threshold=
timestride=

[etc_vortT42_nh_detect]
closedcontourcmd="rvT42,-0.2e-5,6,0"
in_data=
in_data_list=
latname='latitude'
lonname='longitude'
maxlat=90.0
maxlon=
mergedist=6.0
minabslat=
minlat=0.0
minlon=
noclosedcontourcmd=
out=
out_file_list=
out_header=
outputcmd="outputcmd_detect_default"
regional=
searchbymax="rvT42"
searchbymin=
thresholdcmd=
timefilter=
verbosity=

[etc_vortT42_nh_stitch]
format=
in=
in_fmt="in_fmt_stitch_default"
maxgap=2
min_endpoint_dist=10.0
min_path_dist=
mintime=8
out=
out_file_format=
range=5.0
threshold=
timestride=

[etc_vortT42_sh_detect]
closedcontourcmd="rvT42,0.2e-5,6,0"
in_data=
in_data_list=
latname='latitude'
lonname='longitude'
maxlat=0.0
maxlon=
mergedist=6.0
minabslat=
minlat=-90.0
minlon=
noclosedcontourcmd=
out=
out_file_list=
out_header=
outputcmd="outputcmd_detect_default"
regional=
searchbymax=
searchbymin="rvT42"
thresholdcmd=
timefilter=
verbosity=

[etc_vortT42_sh_stitch]
format=
in=
in_fmt="in_fmt_stitch_default"
maxgap=2
min_endpoint_dist=10.0
min_path_dist=
mintime=8
out=
out_file_format=
range=5.0
threshold=
timestride=

[monsoon_zg_detect]
closedcontourcmd="zg_850,12.8,10,0"
latname=latitude
lonname=longitude
maxlat=45.0
maxlon=100.0
mergedist=5.0
minabslat=
minlat=0.0
minlon=60.0
noclosedcontourcmd=
out_header=
outputcmd="outputcmd_detect_default"
regional=
searchbymax=
searchbymin="zg_850"
thresholdcmd=
timefilter=
verbosity=

[monsoon_zg_profile]
calculate="ace=eval_ace(uas,vas,3.0);acepsl=eval_acepsl(slp,3.0);ike=eval_ike(uas,vas,3.0);pdi=eval_pdi(uas,vas,3.0)"
in_fmt="in_fmt_stitch_default"
latname='latitude'
lonname='longitude'
out_fmt="out_fmt_profile2_default"

[monsoon_zg_stitch]
format=
in_fmt="in_fmt_stitch_default"
maxgap=2
min_endpoint_dist=8.0
min_path_dist=
mintime=5
out_file_format=
range=3.0
threshold="orog_max,<=,816,4;rh_avg_850,>=,85,4"
timestride=

[tc_ew_nh_detect]
closedcontourcmd="rvT63_600,-0.5e-5,4,0"
in_data=
in_data_list=
latname='latitude'
lonname='longitude'
maxlat=40.0
maxlon=
mergedist=2.0
minabslat=
minlat=0.0
minlon=
noclosedcontourcmd=
out=
out_file_list=
out_header=
outputcmd="outputcmd_detect_default"
regional=
searchbymax="rvT63_600"
searchbymin=
thresholdcmd=
timefilter=
verbosity=

[tc_ew_nh_stitch]
format=
in=
in_fmt="in_fmt_stitch_default"
maxgap=0
min_endpoint_dist=10.0
min_path_dist=
mintime=8
out=
out_file_format=
range=3.0
threshold="lat,<=,25.0,8;lat,>=,0.0,8"
timestride=

[tc_ew_sh_detect]
closedcontourcmd="rvT63_600,0.5e-5,4,0"
in_data=
in_data_list=
latname='latitude'
lonname='longitude'
maxlat=0.0
maxlon=
mergedist=2.0
minabslat=
minlat=-40.0
minlon=
noclosedcontourcmd=
out=
out_file_list=
out_header=
outputcmd="outputcmd_detect_default"
regional=
searchbymax=
searchbymin="rvT63_600"
thresholdcmd=
timefilter=
verbosity=

[tc_ew_sh_stitch]
format=
in=
in_fmt="in_fmt_stitch_default"
maxgap=0
min_endpoint_dist=10.0
min_path_dist=
mintime=8
out=
out_file_format=
range=3.0
threshold="lat,>=,-25.0,8;lat,<=,0.0,8"
timestride=

[tc_slp_detect]
closedcontourcmd="slp,200.0,5.5,0;_DIFF(zg_250,zg_500),-6.0,6.5,1.0"
latname=latitude
lonname=longitude
maxlat=
maxlon=
mergedist=6.0
minabslat=
minlat=
minlon=
noclosedcontourcmd=
out_header=
outputcmd="outputcmd_detect_default"
regional=
searchbymax=
searchbymin=slp
thresholdcmd=
timefilter=
verbosity=

[tc_slp_profile]
calculate="rprof=radial_wind_profile(uas,vas,79,0.125);radius_8=lastwhere(rprof,>,8.0);rprof_slp=radial_profile(slp,79,0.125);ace=eval_ace(uas,vas,radius_8);acepsl=eval_acepsl(slp,radius_8);ike=eval_ike(uas,vas,radius_8);pdi=eval_pdi(uas,vas,radius_8)"
in_fmt="in_fmt_stitch_default"
latname='latitude'
lonname='longitude'
out_fmt="out_fmt_profile1_default"

[tc_slp_stitch]
format=
in_fmt="in_fmt_stitch_default"
maxgap=2
min_endpoint_dist=8.0
min_path_dist=
mintime=10
out_file_format=
range=6.0
threshold="lat,<=,40,10;lat,>=,-40,10;orog_max,<=,1500,10;orog_max,<=,10,4"
timestride=

[tc_vort_T63_nh_detect]
closedcontourcmd="_AVG(rvT63_850,rvT63_700,rvT63_600),-0.5e-5,4,0"
latname='latitude'
lonname='longitude'
maxlat=90.0
maxlon=
mergedist=6.0
minabslat=
minlat=-10.0
minlon=
noclosedcontourcmd=
out_header=
outputcmd="outputcmd_detect_default"
regional=
searchbymax="_AVG(rvT63_850,rvT63_700,rvT63_600)"
searchbymin=
thresholdcmd="_AVG(rvT63_850,rvT63_700,rvT63_600),>=,5.0e-6,5"
timefilter=
verbosity=

[tc_vort_T63_nh_profile]
calculate="rprof=radial_wind_profile(uas,vas,79,0.125);radius_8=lastwhere(rprof,>,8.0);rprof_slp=radial_profile(slp,79,0.125);ace=eval_ace(uas,vas,radius_8);acepsl=eval_acepsl(slp,radius_8);ike=eval_ike(uas,vas,radius_8);pdi=eval_pdi(uas,vas,radius_8)"
in_fmt="in_fmt_stitch_default"
latname='latitude'
lonname='longitude'
out_fmt="out_fmt_profile1_default"

[tc_vort_T63_nh_stitch]
format=
in_fmt="in_fmt_stitch_default"
maxgap=2
min_endpoint_dist=6.0
min_path_dist=
mintime=8
out_file_format=
range=3.0
threshold=
timestride=

[tc_vort_T63_sh_detect]
closedcontourcmd="_AVG(rvT63_850,rvT63_700,rvT63_600),0.5e-5,4,0"
latname='latitude'
lonname='longitude'
maxlat=10.0
maxlon=
mergedist=6.0
minabslat=
minlat=-90.0
minlon=
noclosedcontourcmd=
out_header=
outputcmd="outputcmd_detect_default"
regional=
searchbymax=
searchbymin="_AVG(rvT63_850,rvT63_700,rvT63_600)"
thresholdcmd="_AVG(rvT63_850,rvT63_700,rvT63_600),<=,-5.0e-6,5"
timefilter=
verbosity=

[tc_vort_T63_sh_profile]
calculate="rprof=radial_wind_profile(uas,vas,79,0.125);radius_8=lastwhere(rprof,>,8.0);rprof_slp=radial_profile(slp,79,0.125);ace=eval_ace(uas,vas,radius_8);acepsl=eval_acepsl(slp,radius_8);ike=eval_ike(uas,vas,radius_8);pdi=eval_pdi(uas,vas,radius_8)"
in_fmt="in_fmt_stitch_default"
latname='latitude'
lonname='longitude'
out_fmt="out_fmt_profile1_default"

[tc_vort_T63_sh_stitch]
format=
in_fmt="in_fmt_stitch_default"
maxgap=2
min_endpoint_dist=6.0
min_path_dist=
mintime=8
out_file_format=
range=3.0
threshold=
timestride=

[tc_vort_T63wc_nh_detect]
closedcontourcmd="_AVG(rvT63_850,rvT63_700,rvT63_600),-0.5e-5,4,0;_DIFF(zg_250,zg_500),-6.0,6.5,1.0"
latname='latitude'
lonname='longitude'
maxlat=90.0
maxlon=
mergedist=6.0
minabslat=
minlat=-10.0
minlon=
noclosedcontourcmd=
out_header=
outputcmd="outputcmd_detect_default"
regional=
searchbymax="_AVG(rvT63_850,rvT63_700,rvT63_600)"
searchbymin=
thresholdcmd="_AVG(rvT63_850,rvT63_700,rvT63_600),>=,5.0e-6,5"
timefilter=
verbosity=

[tc_vort_T63wc_nh_profile]
calculate="rprof=radial_wind_profile(uas,vas,79,0.125);radius_8=lastwhere(rprof,>,8.0);rprof_slp=radial_profile(slp,79,0.125);ace=eval_ace(uas,vas,radius_8);acepsl=eval_acepsl(slp,radius_8);ike=eval_ike(uas,vas,radius_8);pdi=eval_pdi(uas,vas,radius_8)"
in_fmt="in_fmt_stitch_default"
latname='latitude'
lonname='longitude'
out_fmt="out_fmt_profile1_default"

[tc_vort_T63wc_nh_stitch]
format=
in_fmt="in_fmt_stitch_default"
maxgap=2
min_endpoint_dist=6.0
min_path_dist=
mintime=8
out_file_format=
range=3.0
threshold="lat,<=,40.0,8;lat,>=,0.0,8;lat,<=,30.0,1;orog_max,<=,10,4"
timestride=

[tc_vort_T63wc_sh_detect]
closedcontourcmd="_AVG(rvT63_850,rvT63_700,rvT63_600),0.5e-5,4,0;_DIFF(zg_250,zg_500),-6.0,6.5,1.0"
latname='latitude'
lonname='longitude'
maxlat=10.0
maxlon=
mergedist=6.0
minabslat=
minlat=-90.0
minlon=
noclosedcontourcmd=
out_header=
outputcmd="outputcmd_detect_default"
regional=
searchbymax=
searchbymin="_AVG(rvT63_850,rvT63_700,rvT63_600)"
thresholdcmd="_AVG(rvT63_850,rvT63_700,rvT63_600),<=,-5.0e-6,5"
timefilter=
verbosity=

[tc_vort_T63wc_sh_profile]
calculate="rprof=radial_wind_profile(uas,vas,79,0.125);radius_8=lastwhere(rprof,>,8.0);rprof_slp=radial_profile(slp,79,0.125);ace=eval_ace(uas,vas,radius_8);acepsl=eval_acepsl(slp,radius_8);ike=eval_ike(uas,vas,radius_8);pdi=eval_pdi(uas,vas,radius_8)"
in_fmt="in_fmt_stitch_default"
latname='latitude'
lonname='longitude'
out_fmt="out_fmt_profile1_default"

[tc_vort_T63wc_sh_stitch]
format=
in_fmt="in_fmt_stitch_default"
maxgap=2
min_endpoint_dist=6.0
min_path_dist=
mintime=8
out_file_format=
range=3.0
threshold="lat,>=,-40.0,8;lat,<=,0.0,8;lat,>=,-30.0,1;orog_max,<=,10,4"
timestride=